#include <stdio.h>
#include <stdlib.h>
#include "SMS.h"

// TODO 用strtol来进行字符串和数的转换

#define DSC_to_msg(DSC) (DSC == 0 ? "Bit7" : (DSC == 1 ? "Bit8" : "UCS2"))
int main() {
    SMS *sms = new SMS();
    //SMS_Struct s = sms->PDUDecoding("0891683108502905F0040D91683159298373F70008512111013253232A00610062006300640065006600670040002400250022002A002D98769876987698769876987698769876");
    SMS_Struct s = sms->PDUDecoding(
            "0891683108502905F0040D91683159298373F70000512101616500232261F1985C369F01234149A46ABD50A990E8A4DBB17E31D9AC56B3DD703918");
    //SMS_Struct s = sms->PDUDecoding("0891683108801505F94405A10180F60008512111901592238C0500035F02014E3A5E86795D8D355DDE79FB52A800340047002B8BD555467528FF0C6211516C53F8672C6708541160A88D60900177015185514D8D39901A8BDD65F6957F00310030003000305206949FFF084EF7503C0032003000305143FF09FF0C4E0E60A851714EAB7CBE5F6979FB52A800340047751F6D3BFF016CE8FF1A8D60900165F6957F4EC59650");
    printf("服务中心地址: %s\n", s.SCA);
    printf("发送方地址: %s\n", s.OA);
    printf("服务中心时间戳: %s\n", s.SCTS);
    printf("消息内容: %s\n", s.UD);
    printf("数据编码方案： %s\n", DSC_to_msg(s.DCS));
    printf("消息类型： %d\n", s.MC);
    return 0;
}