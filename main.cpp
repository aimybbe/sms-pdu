#include <stdio.h>
#include <stdlib.h>
#include "SMS.h"
#include <locale.h>

#define DSC_to_msg(DSC) (DSC == 0 ? L"Bit7" : (DSC == 1 ? L"Bit8" : L"UCS2"))

int main() {

    setlocale(LC_ALL, "");

    SMS *sms = new SMS();
    SMS_Struct s = sms->PDUDecoding(
            L"0891683108502905F0040D91683159298373F70008512111013253232A00610062006300640065006600670040002400250022002A002D98769876987698769876987698769876");
    //SMS_Struct s = sms->PDUDecoding(
    //L"0891683108502905F0040D91683159298373F70000512101616500232261F1985C369F01234149A46ABD50A990E8A4DBB17E31D9AC56B3DD703918");
    //SMS_Struct s = sms->PDUDecoding(L"0891683108801505F94405A10180F60008512111901592238C0500035F02014E3A5E86795D8D355DDE79FB52A800340047002B8BD555467528FF0C6211516C53F8672C6708541160A88D60900177015185514D8D39901A8BDD65F6957F00310030003000305206949FFF084EF7503C0032003000305143FF09FF0C4E0E60A851714EAB7CBE5F6979FB52A800340047751F6D3BFF016CE8FF1A8D60900165F6957F4EC59650");
    wprintf(L"服务中心地址: %ls\n", s.SCA);
    wprintf(L"发送方地址: %ls\n", s.OA);
    wprintf(L"服务中心时间戳: %ls\n", s.SCTS);
    wprintf(L"消息内容: %ls\n", s.UD);
    wprintf(L"数据编码方案： %ls\n", DSC_to_msg(s.DCS));
    wprintf(L"消息类型： %d\n", s.MC);

    return 0;
}